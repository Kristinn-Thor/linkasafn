{"version":3,"sources":["mutations.js","components/CreateLink.js","components/AuthToken.js","utils.js","queries.js","helperFunctions.js","constants.js","components/Link.js","components/Loader.js","components/LinkList.js","components/Header.js","components/LoginForm.js","components/SignUpForm.js","components/Login.js","apolloClient.js","components/Search.js","components/ErrorBoundary.js","components/Page404.js","components/TopLinks.js","components/App.js","index.js"],"names":["CREATE_LINK_MUTATION","gql","SIGNUP_MUTATION","LOGIN_MUTATION","VOTE_MUTATION","CreateLink","useState","description","url","formState","setFormState","error","message","errorState","setError","history","useHistory","useMutation","variables","onError","onCompleted","push","createLink","className","onSubmit","e","preventDefault","value","onChange","target","type","placeholder","TOKEN_NAME","useAuthToken","useCookies","cookies","setCookie","removeCookie","token","SameSite","timeDifferenceForDate","date","dateAsInt","parseInt","current","previous","milliSecondsPerMinute","milliSecondsPerHour","milliSecondsPerDay","milliSecondsPerMonth","milliSecondsPerYear","elapsed","Math","round","timeDifference","Date","getTime","FEED_QUERY","FEED_QUERY_TOP","FEED_SEARCH_QUERY","getQueryVariables","page","take","skip","orderBy","createdAt","readLinksAndUpdateQuery","query","cache","link","vote","readQuery","updatedLinks","feed","links","map","feedLink","id","votes","updatedQuery","data","writeQuery","Link","index","authToken","linkId","console","info","update","feedQueryAll","votesCount","feedQuery","onClick","href","length","postedBy","name","Loader","style","LinkList","found","setFound","pageIndexParams","location","pathname","split","pageIndex","useQuery","fetchPolicy","pollInterval","loading","count","Header","logout","removeAuthToken","apolloClient","useApolloClient","a","resetStore","useLogout","hamburgerState","setHamburgerState","to","LoginForm","email","password","SignUpForm","validationState","onUpdate","password2","useRef","ref","passwordConf","Login","setAuthToken","login","setValidationState","isError","loginLoading","signup","signupLoading","operation","referance","isAlpha","isEmail","match","uri","httpLink","createHttpLink","ApolloLink","forward","setContext","headers","authorization","authMiddleware","concat","ApolloClient","InMemoryCache","Search","queryDone","results","setResults","searchFilter","setSearchFilter","useLazyQuery","executeSearch","filter","errorStyle","textAlign","padding","ErrorBoundary","props","state","hasError","this","children","React","Component","Page404","title","src","max-width","max-height","frameBorder","TopLinks","isTop","includes","App","client","exact","path","render","component","ReactDOM","CookiesProvider","document","getElementById"],"mappings":"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","file":"static/js/main.a75fd8f2.chunk.js","sourcesContent":["import { gql } from \"@apollo/client\";\n\nexport const CREATE_LINK_MUTATION = gql`\n  mutation PostMutation(\n    $description: String!\n    $url: String!\n    ) {\n      post(description: $description, url: $url) {\n        id\n        url\n        description\n      }\n    }\n`;\n\nexport const SIGNUP_MUTATION = gql`\n  mutation SignupMutation(\n    $email: String!\n    $password: String!\n    $name: String!\n  ) {\n    signup(\n      email: $email\n      password: $password\n      name: $name\n    ) {\n      token\n    }\n  }\n`;\n\nexport const LOGIN_MUTATION = gql`\n  mutation LoginMutation(\n    $email: String!\n    $password: String!\n  ) {\n    login(email: $email, password: $password) {\n      token\n    }\n  }\n`;\n\nexport const VOTE_MUTATION = gql`\n  mutation VoteMutation($linkId: ID!) {\n    vote(linkId: $linkId) {\n      id\n      link {\n        id\n        votes {\n          id\n          user {\n            id\n          }\n        }\n      }\n      user {\n        id\n      }\n    }\n  }\n`;","import React, { useState } from 'react';\nimport { useMutation } from '@apollo/client';\nimport { useHistory } from \"react-router\";\nimport { CREATE_LINK_MUTATION } from '../mutations';\n\nconst CreateLink = () => {\n  const [formState, setFormState] = useState({\n    description: '',\n    url: ''\n  });\n\n  const [errorState, setError] = useState({\n    error: false,\n    message: 'Obbosí villa við að skrá link'\n  });\n\n  const history = useHistory();\n\n  const [createLink] = useMutation(CREATE_LINK_MUTATION, {\n    variables: {\n      description: formState.description,\n      url: formState.url\n    },\n    onError: (error) => {\n      if (error.message === 'Þú verður á skrá þig inn fyrst' || error.message === 'Linkur þarf að vera URL') {\n        setError({ error: true, message: error.message });\n        return;\n      }\n      setError({ ...errorState, error: true });\n    },\n    onCompleted: () => history.push('/')\n  });\n\n  return (\n    <>\n      {errorState.error && (\n        <div className=\"form-error\">\n          <h2>Villa</h2>\n          <p>{errorState.message}</p>\n        </div>\n      )}\n      <form\n        className=\"form\"\n        onSubmit={(e) => {\n          e.preventDefault();\n          createLink();\n        }}\n      >\n        <input\n          className=\"input\"\n          value={formState.description}\n          onChange={(e) => setFormState({ ...formState, description: e.target.value })}\n          type=\"text\"\n          placeholder=\"Lýsing á linknum\"\n        />\n        <div className=\"form-underline --purple\"></div>\n        <input\n          className=\"input\"\n          value={formState.url}\n          onChange={(e) => setFormState({ ...formState, url: e.target.value })}\n          type=\"text\"\n          placeholder=\"Vefslóðin á linkinn\"\n        />\n        <div className=\"form-underline --purple\"></div>\n        <button className=\"button --submit\" type=\"submit\">Skrá link</button>\n      </form>\n    </>\n  );\n};\n\nexport default CreateLink;","import { useApolloClient } from '@apollo/client';\nimport { useCookies } from 'react-cookie';\n\n// Breyta sem heldur utan um nafnið á kökunni sem geymir jwt lykilinn\nconst TOKEN_NAME = 'auth-token';\n\n// Búum til okkar eigin 'krók' (react-hook) til þess að sækja, vista og eyða aðgangs-lyklinum\n// Aðskiljum aðgangskerfið frá kökugeymslunni.\nexport const useAuthToken = () => {\n  // Notum react-cookies pakkann sjá: https://www.npmjs.com/package/react-cookie\n  const [cookies, setCookie, removeCookie] = useCookies([TOKEN_NAME]);\n\n  // Fall sem vistar aðgangslykilinn með kökunafninu 'auth-token'\n  // Setjum flaggið SameSite: strict til þess að koma í veg fyrir CSRF árásir\n  // https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)\n  // Getum einnig bætt við secure: true þ.a. aðeins er hægt að \n  // nota kökuna á öruggari tengingu -> https (virkar þá ekki í þróunarumhverfi)\n  const setAuthToken = (token) => setCookie(TOKEN_NAME, token, { SameSite: 'strict' });\n\n  // Fjarlægjum auth-token lykilinn úr kökunum, t.d. þegar við loggum notanda út\n  const removeAuthToken = () => removeCookie(TOKEN_NAME);\n\n  return [cookies[TOKEN_NAME], setAuthToken, removeAuthToken];\n};\n\nexport const useLogout = () => {\n  const [, , removeAuthToken] = useAuthToken();\n\n  const apolloClient = useApolloClient(); // apolloClient vísar nú í 'client-inn' sem við bjuggum til í upphafi í App.js\n\n  const logout = async () => {\n    removeAuthToken();\n    await apolloClient.resetStore();\n  };\n\n  return logout;\n}","function timeDifference(current, previous) {\n  const milliSecondsPerMinute = 60 * 1000;\n  const milliSecondsPerHour = milliSecondsPerMinute * 60;\n  const milliSecondsPerDay = milliSecondsPerHour * 24;\n  const milliSecondsPerMonth = milliSecondsPerDay * 30;\n  const milliSecondsPerYear = milliSecondsPerDay * 365;\n\n  const elapsed = current - previous;\n\n  if (elapsed < milliSecondsPerMinute / 3) {\n    return 'just now';\n  }\n\n  if (elapsed < milliSecondsPerMinute) {\n    return 'less than 1 min ago';\n  } else if (elapsed < milliSecondsPerHour) {\n    return (\n      Math.round(elapsed / milliSecondsPerMinute) +\n      ' min ago'\n    );\n  } else if (elapsed < milliSecondsPerDay) {\n    return (\n      Math.round(elapsed / milliSecondsPerHour) + ' h ago'\n    );\n  } else if (elapsed < milliSecondsPerMonth) {\n    return (\n      Math.round(elapsed / milliSecondsPerDay) + ' days ago'\n    );\n  } else if (elapsed < milliSecondsPerYear) {\n    return (\n      Math.round(elapsed / milliSecondsPerMonth) + ' mo ago'\n    );\n  } else {\n    return (\n      Math.round(elapsed / milliSecondsPerYear) +\n      ' years ago'\n    );\n  }\n}\n\nexport function timeDifferenceForDate(date) {\n  const dateAsInt = parseInt(date, 10);\n  const now = new Date().getTime();\n  const updated = new Date(dateAsInt).getTime();\n  return timeDifference(now, updated);\n}","import { gql } from '@apollo/client';\n\nexport const FEED_QUERY = gql`\n query FeedQuery($type: ID, $orderBy: LinkOrderByInput, $skip: Int, $take: Int){\n    feed(type: $type, orderBy: $orderBy, skip: $skip, take:$take) {\n      count\n      id\n      links {\n        id\n        createdAt\n        url\n        description\n        postedBy {\n          id\n          name\n        }\n        votes {\n          id\n          user {\n            id\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const FEED_QUERY_TOP = gql`\n query FeedQueryTop($type: ID, $orderBy: LinkOrderByInput, $skip: Int, $take: Int){\n    feed(type: $type, orderBy: $orderBy, skip: $skip, take:$take) {\n      count\n      id\n      links {\n        id\n        createdAt\n        url\n        description\n        postedBy {\n          id\n          name\n        }\n        votesCount\n        votes {\n          id\n          user {\n            id\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const FEED_SEARCH_QUERY = gql`\n  query FeedSearchQuery($type: ID, $filter: String!) {\n    feed(type: $type, filter: $filter) {\n      id\n      links {\n        id\n        url\n        description\n        createdAt\n        postedBy {\n          id\n          name\n        }\n        votes {\n          id\n          user {\n            id\n          }\n        }\n      }\n    }\n  }\n`;","import { LINKS_PER_PAGE } from \"./constants\";\n\n// Fall sem sér um að réttar breytur fylgi sql fyrirspurninni út frá því\n// hvort við erum á síðunnni sem sýnir okkur nýjustu linka (/new/:page)\n// eða top 10 vinsælustu linkana (/top)\nexport const getQueryVariables = (page, type) => {\n  const skip = (page - 1) * LINKS_PER_PAGE;\n  const take = LINKS_PER_PAGE;\n  const orderBy = { createdAt: 'desc' };\n  if (page) return { type, take, skip, orderBy };\n  return {}\n};\n\n// Fall sem les cache-aða fyrirspurn af linkum, uppfærir atkvæðin\n// fyrir linkana og skrifar uppfærða fyrirspurn aftur í cache-ið\nexport const readLinksAndUpdateQuery = (query, cache, link, vote) => {\n  if (!cache.readQuery(query)) return; // Er fyrirspurnin til í cache-inu?\n  const { feed } = cache.readQuery(query);\n  const updatedLinks = feed.links.map((feedLink) => {\n    if (feedLink.id === link.id) {\n      return {\n        ...feedLink,\n        votes: [...feedLink.votes, vote]\n      };\n    }\n    return feedLink;\n  });\n  const updatedQuery = {\n    ...query,\n    data: {\n      feed: {\n        links: updatedLinks\n      }\n    },\n  }\n  cache.writeQuery(updatedQuery);\n};\n\n\n\n\n\n\n\n","export const LINKS_PER_PAGE = 10;","import React from 'react';\nimport { useAuthToken } from './AuthToken';\nimport { timeDifferenceForDate } from \"../utils\";\nimport { useMutation } from '@apollo/client';\nimport { VOTE_MUTATION } from '../mutations';\nimport { FEED_QUERY, FEED_QUERY_TOP } from \"../queries\";\nimport { getQueryVariables, readLinksAndUpdateQuery } from \"../helperFunctions\";\nimport { concat } from 'lodash';\n\nconst Link = ({ link, page, index }) => {\n  const [authToken, ,] = useAuthToken();\n\n  const [vote] = useMutation(VOTE_MUTATION, {\n    variables: {\n      linkId: link.id\n    },\n    onError: (error) => console.info(error.message),\n    update(cache, { data: { vote } }) {\n      // Uppfærum cache-ið fyrir báðar fyrirspurnir \n      const feedQueryAll = {\n        query: FEED_QUERY_TOP,\n        variables: { type: 'top-feed', skip: 0, take: 20, orderBy: { votesCount: 'desc' } }\n      };\n      const feedQuery = {\n        query: FEED_QUERY,\n        variables: getQueryVariables(page, 'main-feed')\n      };\n      readLinksAndUpdateQuery(feedQueryAll, cache, link, vote);\n      readLinksAndUpdateQuery(feedQuery, cache, link, vote);\n    }\n  });\n\n  return (\n    <div className=\"links\">\n      <div className=\"links-index\">\n        <span> {index + 1}. </span>\n        {authToken && (\n          <div className=\"links-vote\" onClick={vote}>\n            ▲\n          </div>\n        )}\n      </div>\n      <div className=\"links-content\">\n        <div className=\"links-text\">\n          {link.description} - <a className=\"links-url\" href={\"https://\" + link.url}>{link.url}</a>\n        </div>\n        {authToken && (\n          <div className=\"links-info\">\n            {link.votes.length} votes | by {link.postedBy.name} {timeDifferenceForDate(link.createdAt)}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Link;","import React from 'react';\n\nconst Loader = () => {\n\n  return (\n    <section className=\"loader\">\n      <div className=\"dots\">\n        <span style={{ \"--i\": 1 }}></span>\n        <span style={{ \"--i\": 2 }}></span>\n        <span style={{ \"--i\": 3 }}></span>\n        <span style={{ \"--i\": 4 }}></span>\n        <span style={{ \"--i\": 5 }}></span>\n        <span style={{ \"--i\": 6 }}></span>\n        <span style={{ \"--i\": 7 }}></span>\n        <span style={{ \"--i\": 8 }}></span>\n        <span style={{ \"--i\": 9 }}></span>\n        <span style={{ \"--i\": 10 }}></span>\n        <span style={{ \"--i\": 11 }}></span>\n        <span style={{ \"--i\": 12 }}></span>\n        <span style={{ \"--i\": 13 }}></span>\n        <span style={{ \"--i\": 14 }}></span>\n        <span style={{ \"--i\": 15 }}></span>\n        <span style={{ \"--i\": 16 }}></span>\n        <span style={{ \"--i\": 17 }}></span>\n        <span style={{ \"--i\": 18 }}></span>\n        <span style={{ \"--i\": 19 }}></span>\n        <span style={{ \"--i\": 20 }}></span>\n      </div>\n    </section>\n  );\n}\n\nexport default Loader;","import React, { useState } from 'react';\nimport Link from './Link';\nimport { useQuery } from '@apollo/client';\nimport { FEED_QUERY } from '../queries';\nimport { LINKS_PER_PAGE } from \"../constants\";\nimport { useHistory } from 'react-router';\nimport { getQueryVariables } from \"../helperFunctions\";\nimport Loader from './Loader';\n\nconst LinkList = () => {\n  const history = useHistory();\n  const [found, setFound] = useState(false);\n\n  const pageIndexParams = history.location.pathname.split('/');\n  let page = parseInt(pageIndexParams[pageIndexParams.length - 1]);\n  if (page < 1) page = 1;\n  const pageIndex = page ? (page - 1) * LINKS_PER_PAGE : 0;\n\n  // Náum í linkana með því að senda gql fyrirspurn á serverinn\n  const { data, loading, error } = useQuery(FEED_QUERY, {\n    fetchPolicy: 'network-only', // Ath. notum ekki cache fyrir main-feed, á eftir að finna lausn á TypePolicies villu\n    variables: getQueryVariables(page, 'main-feed'),\n    pollInterval: 30000,\n    onCompleted: () => {\n      if (data.feed.links.length < 1) {\n        setFound(false);\n      } else setFound(true);\n    }\n  });\n  /* Ath. notum ekki cache fyrir main-feed, á eftir að finna lausn á TypePolicies villu\n  fetchMore({\n    variables: getQueryVariables(page, 'main-feed')\n  });\n  */\n  if (loading) return <Loader />;\n\n  return (\n    <>\n      {error && <h2>Villa við að sækja gögn :(</h2>}\n      { data && (\n        <>\n          <div className=\"link-list\">\n            {data.feed.links.map(\n              (link, index) => (\n                <Link key={link.id} link={link} index={index + pageIndex} page={page} />\n              )\n            )}\n          </div>\n          <div className=\"pageNav\" >\n            <div className={`previousPage pageScroll ${page === 1 ? \"hidden\" : \"\"}`}\n              onClick={() => {\n                if (page > 1) {\n                  history.push(`/new/${page - 1}`);\n                }\n              }}\n            >\n              Til baka\n            </div>\n            <div className={`nextPage pageScroll ${page < data.feed.count / LINKS_PER_PAGE ? \"\" : \"hidden\"}`}\n              onClick={() => {\n                if (page < data.feed.count / LINKS_PER_PAGE) {\n                  history.push(`/new/${page + 1}`);\n                }\n              }}\n            >\n              Næsta síða\n          </div>\n          </div>\n\n          {!found && <h2>Engir linkar fundust</h2>}\n        </>\n\n      )}\n    </>\n  );\n};\n\nexport default LinkList;","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport { useAuthToken, useLogout } from './AuthToken';\n\nconst Header = () => {\n  const history = useHistory();\n  const [authToken, ,] = useAuthToken();\n  const logout = useLogout();\n  const [hamburgerState, setHamburgerState] = useState(false);\n\n  return (\n    <>\n      <div className=\"nav\">\n        <div className=\"logo\" ><a href=\"/\">Linkasafn</a></div>\n        <div className={(hamburgerState) ? \"nav-flexGroup slideIn\" : \"nav-flexGroup\"}>\n          <div className=\"nav-links\">\n            <Link className=\"link\" to=\"/\"> Nýtt </Link>\n            <span>|</span>\n            <Link className=\"link\" to=\"/top\">Topp 20</Link>\n            <span>|</span>\n            <Link className=\"link\" to=\"/search\">Leita</Link>\n            {authToken && (<><span>|</span> <Link className=\"link\" to=\"/create\">Setja inn Link</Link></>)}\n          </div>\n          <div className=\"logInOut\" >\n            {authToken ? (\n              <div\n                className=\"link\"\n                onClick={() => {\n                  logout();\n                  history.push('/');\n                }}\n              >\n                Skrá út\n              </div>\n            ) : (\n              <Link to=\"/login\" className=\"link\">\n                Innskráning\n              </Link>\n            )}\n          </div>\n\n        </div>\n        <button\n          className=\"hamburger\"\n          onClick={() => {\n            (hamburgerState) ? setHamburgerState(false) : setHamburgerState(true);\n          }}\n        >🍔</button>\n      </div>\n    </>\n  );\n};\n\nexport default Header;","import React from \"react\";\n\nconst LoginForm = ({ formState, setFormState }) => {\n\n  return (\n    <div className=\"form signIn\">\n      <input className=\"input\"\n        value={formState.email}\n        onChange={(e) => {\n          setFormState({ ...formState, email: e.target.value });\n        }}\n        type=\"email\"\n        placeholder=\"Netfang\"\n      />\n      <div className=\"form-underline --purple\"></div>\n      <input className=\"input\"\n        value={formState.password}\n        onChange={(e) => {\n          setFormState({ ...formState, password: e.target.value });\n        }}\n        type=\"password\"\n        placeholder=\"Lykilorð\"\n      />\n      <div className=\"form-underline --purple\"></div>\n    </div>\n  );\n}\n\nexport default LoginForm;","import React, { useRef } from \"react\";\n\nconst SignUpForm = ({ formState, validationState, onUpdate }) => {\n\n  const password2 = useRef();\n\n  return (\n    <div className=\"form logIn\">\n      <input className=\"input\"\n        value={formState.name}\n        onChange={(e) => {\n          onUpdate(e, 'name');\n        }}\n        type=\"text\"\n        placeholder=\"Nafn\"\n      />\n      <div className={(validationState.name) ? \"form-underline\" : \"form-underline invalid\"}></div>\n      <input className=\"input\"\n        value={formState.email}\n        onChange={(e) => {\n          onUpdate(e, 'email');\n        }}\n        type=\"email\"\n        placeholder=\"Netfang\"\n      />\n      <div className={(validationState.email) ? \"form-underline\" : \"form-underline invalid\"}></div>\n      <input\n        className=\"input\"\n        value={formState.password}\n        onChange={(e) => {\n          onUpdate(e, 'password', password2);\n        }}\n        type=\"password\"\n        placeholder=\"Lykilorð\"\n      />\n      <div className={(validationState.password) ? \"form-underline\" : \"form-underline invalid\"}></div>\n      <input\n        ref={password2}\n        className=\"input\"\n        value={formState.passwordConf}\n        onChange={(e) => {\n          onUpdate(e, 'password2');\n        }}\n        type=\"password\"\n        placeholder=\"Staðfesta lykilorð\"\n      />\n      <div className={(validationState.passwordConf) ? \"form-underline\" : \"form-underline invalid\"}></div>\n      <div className=\"validation\">\n        <ul>\n          {!validationState.name && (<li>Nafn má aðeins innihalda stafi. Verður að vera a.m.k. tveir stafir</li>)}\n          {!validationState.email && (<li>Netfang verður að vera gilt.</li>)}\n          {!validationState.password && (<li>Lykilorð verður að vera a.m.k. 8 að lengd, innihalda a.m.k. einn stóran og einn lítinn staf. Má innihalda tákn.</li>)}\n          {!validationState.passwordConf && (<li>Vinsamlegast staðfestu rétt lykiliorð</li>)}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nexport default SignUpForm;","\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { useMutation } from \"@apollo/client\";\nimport { useAuthToken } from './AuthToken';\nimport { LOGIN_MUTATION, SIGNUP_MUTATION } from '../mutations';\nimport LoginForm from \"./LoginForm\";\nimport SignUpForm from \"./SignUpForm\";\nimport isEmail from 'validator/lib/isEmail';\nimport isAlpha from 'validator/lib/isAlpha';\nimport Loader from \"./Loader\";\n\nconst Login = () => {\n  const history = useHistory();\n  // Notum useAuthToken react-krókinn sem við útfærðum til þess að vista lykilinn\n  // sem við fáum sem svar frá serverinum ef innskráning eða nýskráning heppnast.\n  // Lykillin (token) er vistað sem 'vafrakaka'\n  const [, setAuthToken,] = useAuthToken();\n\n  //######################################################## STATES ########################################################\n  const [formState, setFormState] = useState({\n    login: true,\n    email: '',\n    password: '',\n    passwordConf: '',\n    name: ''\n  });\n\n  const [validationState, setValidationState] = useState({\n    email: false,\n    password: false,\n    passwordConf: false,\n    name: false,\n  });\n\n  const [error, setError] = useState({\n    isError: false,\n    message: ''\n  })\n  //######################################################## HANDLERS & HELPERS ########################################################\n  //######################################################## CLIENT-SIDE VALIDATION ####################################################\n  const validatePassword = (password) => {\n    // Lykilorð verður að vera 8-200 stafir. Innihalda a.m.k. einn stóran staf og einn lítinn staf. Má innihalda tákn.\n    const isValid = password.match(/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,200}$/);\n    if (isValid) return true;\n    return false;\n  };\n\n  function handleFormChange(e, operation, referance) {\n\n    switch (operation) {\n      case 'name':\n        setFormState({ ...formState, name: e.target.value });\n        if (isAlpha(e.target.value) && e.target.value.length >= 2) {\n          setValidationState({ ...validationState, name: true });\n        }\n        else {\n          setValidationState({ ...validationState, name: false });\n        };\n        break;\n\n      case 'email':\n        setFormState({ ...formState, email: e.target.value });\n        if (isEmail(e.target.value)) {\n          setValidationState({ ...validationState, email: true });\n        }\n        else {\n          setValidationState({ ...validationState, email: false });\n        };\n        break;\n\n      case 'password':\n        setFormState({ ...formState, password: e.target.value });\n        if (validatePassword(e.target.value)) {\n          setValidationState({ ...validationState, password: true });\n          if (e.target.value !== referance.current.value) {\n            setValidationState({ ...validationState, password: true, passwordConf: false });\n          } else {\n            setValidationState({ ...validationState, password: true, passwordConf: true });\n          }\n        }\n        else {\n          setValidationState({ ...validationState, password: false });\n          if (e.target.value !== referance.current.value) {\n            setValidationState({ ...validationState, password: false, passwordConf: false });\n          } else {\n            setValidationState({ ...validationState, password: false, passwordConf: true });\n          }\n        };\n        break;\n\n      case 'password2':\n        setFormState({ ...formState, passwordConf: e.target.value });\n        if (e.target.value === formState.password) {\n          setValidationState({ ...validationState, passwordConf: true });\n        }\n        else {\n          setValidationState({ ...validationState, passwordConf: false });\n        };\n        break;\n\n      default:\n        return;\n    }\n  };\n\n  //######################################################## LOG IN HOOK ########################################################\n  const [login, { loading: loginLoading, error: loginError }] = useMutation(LOGIN_MUTATION, {\n    variables: {\n      email: formState.email,\n      password: formState.password\n    },\n    onError: (error) => setError({ isError: true, message: error.message }),\n    onCompleted: ({ login }) => {\n      setAuthToken(login.token);\n      history.push('/');\n    }\n  });\n  //##############################################################################################################################\n  //######################################################## SIGN UP HOOK ########################################################\n  const [signup, { loading: signupLoading, error: signupError }] = useMutation(SIGNUP_MUTATION, {\n    variables: {\n      name: formState.name,\n      email: formState.email,\n      password: formState.password\n    },\n    onError: (error) => setError({ isError: true, message: error.message }),\n    onCompleted: ({ signup }) => {\n      setAuthToken(signup.token);\n      history.push('/');\n    }\n  });\n  //##############################################################################################################################\n  if (loginLoading) return <Loader />;\n  if (signupLoading) return <Loader />;\n\n  return (\n    <div>\n      <h4 className=\"form-title\" >{formState.login ? 'Innskráning' : 'Nýskráning'}</h4>\n      {!formState.login && (\n        <SignUpForm\n          formState={formState}\n          validationState={validationState}\n          setFormState={setFormState}\n          onUpdate={handleFormChange}\n        />\n      )}\n      {formState.login && (\n        <LoginForm formState={formState} setFormState={setFormState} />\n      )}\n\n      <div className=\"button-group\">\n        <button\n          className={(formState.login ||\n            (validationState.name &&\n              validationState.email &&\n              validationState.password &&\n              validationState.passwordConf)) ? 'button' : 'button hidden'}\n          onClick={(e) => {\n            if (!formState.login) {\n              if (validationState.name && validationState.email && validationState.password && validationState.passwordConf) {\n                return signup();\n              }\n            } else return login();\n          }}\n        >\n          {formState.login ? 'Innskráning' : 'Nýskráning'}\n        </button>\n        <button\n          className=\"button\"\n          onClick={(e) => {\n            setError({ isError: false, message: '' });\n            setFormState({ ...formState, login: !formState.login });\n          }}\n        >\n          {formState.login ? 'Skrá nýjan reikning?' : 'Aftur á innskráningu'}\n        </button>\n      </div>\n\n      { error.isError && (\n        <div className=\"form-error\">\n          <h3>Villa</h3>\n          <p>{error.message}</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Login;","import {\n  ApolloClient,\n  createHttpLink,\n  InMemoryCache,\n  ApolloLink,\n} from '@apollo/client';\nimport { useAuthToken } from './components/AuthToken';\n\n// Middleware sem setur aðgangslykilinn ef hann er til staðar sem authorization header með hverri fyrirspurn e.request \n// sem við sendum á serverinn í gegnum Apollo client.\nconst authMiddleware = (token) => new ApolloLink((operation, forward) => {\n  if (token) {\n    operation.setContext({\n      headers: {\n        authorization: `Bearer ${token}`\n      }\n    });\n  }\n  return forward(operation);\n});\n\nexport const useApolloClient = () => {\n  // Náum í aðgangslykilinn sem er geymdur í vafraköku\n  const [token] = useAuthToken();\n\n  let uri;\n  if (process.env.NODE_ENV === \"production\") {\n    uri = '/graphql';\n  } else {\n    uri = 'http://localhost:4000/graphql'\n  }\n  const httpLink = createHttpLink({\n    uri: uri\n  });\n\n  const link = authMiddleware(token).concat(httpLink)\n\n  return new ApolloClient({\n    link,\n    cache: new InMemoryCache({\n      /*\n        Þurfum að skilgreina \"typePolicie\" fyrir feed fyrirspurnina\n        því við erum að útfæra pagination fyrir linkana sem við fáum frá serverinum.\n        Þ.e. við þurfum að skilgreina hvernig við geymum linkana okkar í cache-inu í clientinum \n        sjá docs: https://www.apollographql.com/docs/react/pagination/core-api/\n      \n      typePolicies: {\n        Query: {\n          fields: {\n            FeedQuery: offsetLimitPagination()\n          },\n        },\n      },\n*/\n    })\n\n  });\n\n};\n","import React, { useState } from 'react';\nimport { useLazyQuery } from '@apollo/client';\nimport Link from './Link';\nimport { FEED_SEARCH_QUERY } from '../queries';\nimport Loader from './Loader';\n\nconst Search = () => {\n  const [results, setResults] = useState({ queryDone: false, found: false });\n  const [searchFilter, setSearchFilter] = useState('');\n  const [executeSearch, { data, loading }] = useLazyQuery(FEED_SEARCH_QUERY, {\n    onCompleted: () => {\n      if (data.feed.links.length < 1) {\n        setResults({ queryDone: true, found: false });\n      } else setResults({ queryDone: true, found: true });\n    }\n  });\n\n  if (loading) return <Loader />;\n\n  return (\n    <>\n      <div className=\"search-box\">\n        <div className=\"search-bar\">\n          <input\n            type=\"text\"\n            placeholder=\"Sláðu inn leitarstreng\"\n            onChange={(e) => setSearchFilter(e.target.value)}\n          />\n          <div className=\"search-bar-underline\"></div>\n        </div>\n        <button\n          className=\"button\"\n          onClick={() => executeSearch({\n            variables: { type: 'search-feed', filter: searchFilter }\n          })\n          }\n        >\n          Hefja leit\n        </button>\n      </div>\n      <div className=\"link-search\">\n        {data &&\n          data.feed.links.map((link, index) => (\n            <Link key={link.id} link={link} index={index} />\n          ))}\n      </div>\n      {results.queryDone && !results.found && <h2>Ekkert fannst :/</h2>}\n    </>\n  );\n};\n\nexport default Search;","import React from 'react';\n\nconst errorStyle = {\n  textAlign: 'center',\n  padding: '1rem'\n}\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return <h1 style={errorStyle}>Obbosí eithvað fór úrskeðis</h1>;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary","import React from 'react';\n\nconst Page404 = () => {\n\n  return (\n    <div className=\"page404\">\n      <h2>404 Villa</h2>\n      <p>\n        Þetta er ekki síðan sem þú ert að leita að 🙈\n      </p>\n      <iframe\n        title=\"Síða fannst ekki Gif\"\n        src=\"https://giphy.com/embed/20k1punZ5bpmM\"\n        max-width=\"480\"\n        max-height=\"387\"\n        frameBorder=\"0\" >\n      </iframe>\n    </div>\n  );\n}\n\nexport default Page404;","import React, { useState } from 'react';\nimport Link from './Link';\nimport { useQuery } from '@apollo/client';\nimport { FEED_QUERY_TOP } from '../queries';\nimport { useHistory } from 'react-router';\nimport Loader from './Loader';\n\nconst TopLinks = () => {\n  const [found, setFound] = useState(false);\n  const history = useHistory();\n  const isTop = history.location.pathname.includes('top');\n\n  const { data, loading, error } = useQuery(FEED_QUERY_TOP, {\n    variables: {\n      type: 'top-feed',\n      skip: 0,\n      take: 20,\n      orderBy: { votesCount: 'desc' }\n    },\n    pollInterval: 30000, // Uppfærum síðuna á 30sek fresti til að fylgjast með breytingum\n    onCompleted: () => {\n      if (data.feed.links.length < 1) {\n        setFound(false);\n      } else setFound(true);\n    }\n  });\n\n  if (loading) return <Loader />\n\n  return (\n    <>\n      {error && <h2>Villa við að sækja gögn :(</h2>}\n      { data && (\n        <div className=\"top-links\">\n          {data.feed.links.map(\n            (link, index) => (\n              <Link key={link.id} link={link} index={index} isTop={isTop} />\n            )\n          )}\n          {!found && <h2>Ekkert fannst :/</h2>}\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default TopLinks;","import React from 'react';\nimport { Switch, Route, BrowserRouter, Redirect } from \"react-router-dom\";\nimport CreateLink from './CreateLink';\nimport LinkList from \"./LinkList\";\nimport Header from \"./Header\";\nimport Login from './Login';\nimport { ApolloProvider } from '@apollo/client';\nimport { useApolloClient } from '../apolloClient';\nimport '../styles/App.css';\nimport Search from './Search';\nimport ErrorBoundary from './ErrorBoundary';\nimport Page404 from './Page404';\nimport TopLinks from './TopLinks';\n\nfunction App() {\n\n  const apolloClient = useApolloClient(); // Búum til nýjan 'client' með okkar eigin útfærslu á useApolloClient\n\n  return (\n    <ApolloProvider client={apolloClient}>\n      <BrowserRouter>\n        <div className=\"App\">\n          <Header />\n          <ErrorBoundary>\n            <Switch>\n              <Route exact path=\"/\" render={() => <Redirect to=\"/new/1\" />} />\n              <Route exact path=\"/top\" component={TopLinks} />\n              <Route exact path=\"/new/:page\" component={LinkList} />\n              <Route exact path=\"/search\" component={Search} />\n              <Route exact path=\"/login\" component={Login} />\n              <Route exact path=\"/create\" component={CreateLink} />\n              <Route component={Page404} />\n            </Switch>\n          </ErrorBoundary>\n        </div>\n      </BrowserRouter>\n    </ApolloProvider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { CookiesProvider } from 'react-cookie'\nimport './styles/index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <CookiesProvider>\n    <App />\n  </CookiesProvider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}